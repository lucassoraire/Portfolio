---
const currentLang = (Astro.url.searchParams.get("lang") ?? "es") as "es" | "en";
---

<header
  class="bg-black py-5 px-8 shadow-md fixed top-0 left-0 right-0 z-50 border-b border-opacity-50"
>
  <div class="max-w-5xl mx-auto flex justify-between items-center">
    <h1 class="text-2xl font-semibold text-white">Lucas Soraire</h1>

    <!-- BotÃ³n Hamburguesa -->
    <button
      id="menu-toggle"
      class="md:hidden text-gray-300 focus:outline-none cursor-pointer"
    >
      <img
        id="menu-icon"
        src="/icons/menu.png"
        alt="MenÃº"
        width="32"
        height="32"
      />
    </button>

    <!-- MenÃº Desktop -->
    <nav class="hidden md:flex items-center gap-6 text-gray-300 font-medium">
      <a href="#aboutme" class="hover:text-sky-600 transition">Sobre mÃ­</a>
      <a href="#proyectos" class="hover:text-sky-600 transition">Proyectos</a>
      <a href="#objetivos" class="hover:text-sky-600 transition">Objetivos</a>
      <a href="#contacto" class="hover:text-sky-600 transition">Contacto</a>
    </nav>
  </div>

  <!-- MenÃº Mobile -->
<div
  id="mobile-menu"
  class="fixed top-0 right-0 left-auto h-screen w-64 bg-black text-gray-300 font-bold py-8 pb-1 flex flex-col gap-6 px-6 z-50 menu-closed text-end"
>
  <a href="#aboutme" class="block hover:text-sky-600 transition-colors text-lg pb-0.5 pt-10">Sobre mÃ­</a>
  <a href="#proyectos" class="block hover:text-sky-600 transition-colors text-lg pb-0.5">Proyectos</a>
  <a href="#objetivos" class="block hover:text-sky-600 transition-colors text-lg pb-0.5">Objetivos</a>
  <a href="#contacto" class="block hover:text-sky-600 transition-colors text-lg pb-0.5">Contacto</a>
   <div class="mt-auto text-sm text-center text-gray-500 pb-3">
    lucassoraire.dev ðŸ’» 
  </div>
</div>
</header>

<!-- Script -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
  const toggleBtn = document.getElementById("menu-toggle");
  const menu = document.getElementById("mobile-menu");
  const icon = document.getElementById("menu-icon");

  if (!toggleBtn || !menu || !icon) return;

  let menuOpen = false;

  // Inicializar links ocultos para animar
  const links = menu.querySelectorAll("a");
  links.forEach(link => {
    link.style.opacity = "0";
    link.style.transform = "translateX(-20px)";
    link.style.transition = "opacity 0.3s ease, transform 0.3s ease";
  });

  toggleBtn.addEventListener("click", () => {
    menuOpen = !menuOpen;

    if (menuOpen) {
      menu.classList.remove("menu-closed");
      menu.classList.add("menu-open");

      // Animar links con delay
      links.forEach((link, i) => {
        setTimeout(() => {
          link.style.opacity = "1";
          link.style.transform = "translateX(0)";
        }, i * 100 + 300);
      });

      // Animar icono
      icon.classList.add("rotate-90");
      setTimeout(() => {
        icon.src = "/assets/x.png";
        icon.classList.remove("rotate-90");
      }, 200);
    } else {
      menu.classList.remove("menu-open");
      menu.classList.add("menu-closed");

      // Ocultar links rÃ¡pido
      links.forEach(link => {
        link.style.opacity = "0";
        link.style.transform = "translateX(-20px)";
      });

      icon.classList.add("rotate-90");
      setTimeout(() => {
        icon.src = "/icons/menu.png";
        icon.classList.remove("rotate-90");
      }, 200);
    }
  });

  // Cerrar menÃº al click en link
  links.forEach(link => {
    link.addEventListener("click", () => {
      menu.classList.remove("menu-open");
      menu.classList.add("menu-closed");
      links.forEach(link => {
        link.style.opacity = "0";
        link.style.transform = "translateX(-20px)";
      });
      icon.src = "/icons/menu.png";
      menuOpen = false;
    });
  });
});


</script>
